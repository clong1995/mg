"use strict";class Cp{constructor(){this._origin=document.location.origin,this._isReady=!1,this._scriptSet=new Set,this._JSONMap=new Map,this._moduleStack=new Map,this._domEvent=new Map,this._eventMap=new Map,this._global=new Map,window.NEW=this._require.bind(this),window.NEW_ASYNC=this._requireAsync.bind(this),window.CLASS=this._define.bind(this),this._head=document.head,document.styleSheets.length<=0?this.append(this._head,this.createDom("style")):(this._firstSheet=document.styleSheets.item(0),this._firstSheet.href&&!this._firstSheet.href.startsWith(this._origin)&&this.appendTo(this._head,this.createDom("style"),-1)),this._firstSheet=document.styleSheets.item(0),this._lastSheet=document.styleSheets.item(document.styleSheets.length-1),this.formatStyle()}setClipboard(e){e.select(),document.execCommand("Copy")}forbiddenMenu(){window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1}}addClass(e,t){return t?(void 0!==e.length?e.forEach(e=>Array.isArray(t)?t.forEach(t=>e.classList.add(t)):e.classList.add(t)):Array.isArray(t)?t.forEach(t=>e.classList.add(t)):e.classList.add(t),e):e}setError(e){this.addClass(e,"error")}removeError(e){this.removeClass(e,"error")}global(){return this._global}ajax(e,{async:t=!0,method:n="POST",headers:r=null,data:s={},success:o=null,status:i=null,error:a=null}={}){null===r&&(r={"Content-type":"application/x-www-form-urlencoded"}),r["cache-control"]="no-cache, must-revalidate, max-age=0, post-check=0, pre-check=0",ajaxRequestRoot&&!e.startsWith("http")&&(e=ajaxRequestRoot+e),null!==ajaxHeadersInterceptor&&(r="function"==typeof ajaxHeadersInterceptor?ajaxHeadersInterceptor(e):ajaxHeadersInterceptor);let l="";if("GET"===n){if(s){let t="";Object.keys(s).forEach(e=>t+=e+"="+encodeURIComponent(s[e])+"&"),t&&(e+="?"+this.trim(t,{char:"&",position:"right"}))}s=null}else l=s&&JSON.stringify(s),r["Content-type"]="application/json";let c=new XMLHttpRequest;c.open(n,e,t),r&&Object.keys(r).forEach(e=>c.setRequestHeader(e,r[e])),c.onreadystatechange=function(){if("function"==typeof i&&i(c.status),4===c.readyState){let e={};try{e=JSON.parse(c.responseText)}catch(e){return console.error(e),void("function"==typeof a&&a(e))}"function"==typeof ajaxResponseInterceptor&&(e=ajaxResponseInterceptor(e)),"function"==typeof o&&o(e)}},c.send(l)}append(e,t,n=-1){if(t){let r=e.children;n<0||n>r.length?e.appendChild(t):e.insertBefore(t,r[n])}return e}appendBatch(e,t=[]){return t.forEach(t=>this.append(e,t)),e}arrMaxMin(e,t="max",n=!1){try{let r="max"===t?Math.max(...e):Math.min(...e);if(n){return{value:r,index:"max"===t?e.indexOf(Math.max.apply(Math,e)):e.indexOf(Math.min.apply(Math,e))}}return r}catch(r){ejs.log("数组太长，超过了最大调用堆栈大小，建议后端处理。此处递归对个数组进行了分段分层处理这，但将有损速度和性能","warn");let s=[],o=0;do{s.push(this.arrMaxMin(e.slice(o,o+=1e4),t,n))}while(o<e.length);return this.arrMaxMin(s,t,n)}}assignDeep(e,t){for(let n in t)"object"==typeof t[n]?void 0===e[n]?e[n]=t[n]:this.assignDeep(e[n],t[n]):e[n]=t[n];return e}attr(e,t=null){if(!e)return e;if(null===t){let t={};return Array.from(e.attributes).forEach(e=>"style"===e.name?null:t[e.name]=e.value),t}if("string"==typeof t)return e.getAttribute(t);for(let n in t)("class"===n&&!t[n].indexOf(".")||"id"===n&&!t[n].indexOf("#"))&&(t[n]=t[n].substr(1)),null===t[n]?e.removeAttribute(n):e.setAttribute(n,t[n]);return e}_batchSetSheet(e,t){this.trim(t,{char:"}",position:"right"}).split("}").forEach(t=>e.insertRule(t+"}",e.cssRules.length))}camelize(e){return e.includes("-")||e.includes("_")?e.replace(/[-_][^-_]/g,e=>e.charAt(1).toUpperCase()):e}capitalize(e){return e.charAt(0).toUpperCase()+e.substring(1)}cloneArr(e){return[...e]}createDom(e="div",t={}){let n=document.createElement(e);for(let e in t)n.setAttribute(e,t[e]);return n}css(e,t=null){if(null==t){let t=e.style.cssText;return t?this.styleStr2Obj(`{${t}}`):{}}for(let n in t)""!==t[n]&&(null===t[n]?e.style.removeProperty(this.underscored(n)):e.style[n]=t[n])}_define(e,t){this._moduleStack.set(e,t)}deleteSheet(e){[...document.styleSheets].forEach(t=>{[...t.cssRules].forEach((t,n)=>0===t.selectorText.indexOf(e)&&t.deleteRule(n))})}batchDeleteSheet(e){e.forEach(e=>this.deleteSheet(e))}date(e="yyyy-MM-dd HH:mm:ss",t=new Date){let n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},r={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+r[t.getDay()+""]));for(let t in n)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[t]:("00"+n[t]).substr((""+n[t]).length)));return e}difference(e,t){let n=null;return e.length||t.length?e.length&&t.length?(t=new Set(t),n=[...new Set(e.filter(e=>!t.has(e)))]):n=e.length?e:t:n=[],n}distinct(e){return[...new Set(e)]}downLog(e=""){}empty(e,t=null,n=!1){e.innerHTML="",t&&("object"==typeof t?e.appendChild(t):"string"==typeof t&&(n?this.text(e,t):this.html(e,t)))}escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}formatStyle(){this.setStrSheet('\n            *{\n                box-sizing: border-box;\n                -webkit-text-size-adjust: none;\n            }\n            blockquote, body, button, dd, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, hr, input, legend, li, ol, p, pre, td, textarea, th, ul {\n                margin: 0;\n                padding: 0\n            }\n            html,body{\n                cursor:auto;\n                width:100%;\n                height:100%;\n                overflow: hidden;\n                padding: 0;\n            }\n            body, button, input, select, textarea, a, li {\n                font-size: 12px;\n                line-height:1.3;\n                font-family:-apple-system,"Helvetica Neue",Helvetica,Arial,"PingFang SC","Hiragino Sans GB","WenQuanYi Micro Hei","Microsoft Yahei",sans-serif;\n                -webkit-font-smoothing: antialiased;\n                word-wrap: break-word;\n            }\n            \n            input,textarea,select,button{\n                outline:none\n            }\n            \n            h1, h2, h3, h4, h5, h6, button, input, select, textarea {\n                font-size: 100%\n            }\n            \n            input[type=button] {\n                cursor: pointer\n            }\n            \n            address, cite, dfn, em, var {\n                font-style: normal\n            }\n            \n            code, kbd, pre, samp {\n                font-family: courier new, courier, monospace\n            }\n            \n            small {\n                font-size: 12px\n            }\n            \n            ol, ul {\n                list-style: none;\n            }\n            \n            a {\n                text-decoration: none;\n                color: #555\n            }\n            \n            sup {\n                vertical-align: text-top\n            }\n            \n            sub {\n                vertical-align: text-bottom\n            }\n            \n            img {\n                border: 0\n            }\n            \n            label,button{\n                cursor:pointer;\n            }\n            \n            iframe{\n                display:block;\n                border:none;\n            }\n           \n            table {\n                border-collapse: collapse;\n                border-spacing: 0\n            }\n            \n            .hide {\n                display:none !important;\n            }\n            \n            .ellipsis {\n                display: block;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n            \n            .centerWrap {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n            \n            .alt{\n                position: relative;\n                cursor: pointer;\n            }\n            .alt:after{\n                font-size: 10px;\n                position: absolute;\n                bottom: -12px;\n                left: 0;\n                background: #cecece;\n                width: 50px;\n                height: 15px;\n                text-align: center;\n                line-height: 15px;\n                z-index: 2;\n                display: none;\n                border-radius: 3px;\n            }\n            \n            .alt:hover:after {\n                display: block;\n            }\n            \n            .centerBg{\n                background-repeat: no-repeat;\n                background-position: 50% 50%;\n                background-size: contain;\n            }\n            \n            .fillBg{\n                background-repeat: no-repeat;\n                background-size: 100% 100%;\n            }\n            \n            .disable {\n                filter: grayscale(100%);\n                opacity: .3;\n                pointer-events:none;\n            }')}setStrSheet(e){e&&this.trim(e,{char:"}",position:"right"}).split("}").forEach((e,t)=>{this._firstSheet.insertRule(e+"}",t)})}fool(){this.removeAll(document.querySelectorAll("script")),document.oncontextmenu=(()=>!1),document.onpaste=(()=>!1),document.oncopy=(()=>!1),document.oncut=(()=>!1),document.onselectstart=(()=>!1),document.onkeydown=(()=>{let e=window.event.keyCode;if(16===e||17===e||18===e||123===e||116===e)return!1})}getStyleSheet(e=""){let t=new Set;return Array.from(document.styleSheets).forEach((n,r)=>Array.from(n.cssRules).forEach((n,s)=>{""!==e?n.selectorText&&n.selectorText.startsWith(e)&&t.add({sheetIndex:r,ruleIndex:s,rule:n.cssText}):t.add({sheetIndex:r,ruleIndex:s,rule:n.cssText})})),t}hasClass(e,t){return e.classList.contains(t)}html(e,t=null,n=null){return t||n?t?(n?e.insertAdjacentHTML(n,t):e.innerHTML=t,e):e:(this.empty(e),e)}text(e,t=null,n=!1){if(null!==t){let r=this.textNode(t);return n||(e.innerText=""),this.append(e,r),e}return e.innerText}iconFont({ttfUrl:e=this.path()+"iconfont/iconfont.ttf",fontSize:t=16}={}){this._batchSetSheet(this._firstSheet,`@font-face {\n                font-family: "iconfont";\n                src:url('${e}') format('truetype')\n            }\n            .iconfont {\n                font-family: "iconfont" !important;\n                font-size: ${t}px;\n                font-style: normal;\n                -webkit-font-smoothing: antialiased;\n                -moz-osx-font-smoothing: grayscale\n            }`)}hasSheet(e){return e&&[...document.styleSheets].reverse().some(t=>[...t.cssRules].reverse().some(t=>t.selectorText&&t.selectorText===e))}formatSelectorText(){}animationSheet(e,{duration:t=.5,timing:n="ease",iteration:r=1,fill:s="forwards",delay:o=0}={}){let i=e+t+n+r+s+o;return i=i.replace(/\./g,"d"),this.getStyleSheet("."+i).size||this.setSheet("."+i,{animationName:e,animationDuration:t+"s",animationTimingFunction:n,animationIterationCount:r,animationFillMode:s,animationDelay:o+"s"}),i}hide(e){void 0!==e.length||"NodeList"==typeof e?e.forEach(e=>this.addClass(e,"hide")):this.addClass(e,"hide")}show(e){void 0!==e.length?e.forEach(e=>this.removeClass(e,"hide")):this.removeClass(e,"hide")}intersect(e,t){new[...Set([...e].filter(e=>t.has(e)))]}link(e,t={},n=!1){let r="";if(t)for(let e in t)r+=e+"="+escape(t[e])+"&";""!==r&&(r=r.substring(0,r.length-1),e.includes("?")?e+="&"+r:e+="?"+r),n?window.open(e,"_blank"):window.location.href=e}linkReplace(e,t={}){let n="";if(t)for(let e in t)n+=e+"="+escape(t[e])+"&";""!==n&&(n=n.substring(0,n.length-1),e.includes("?")?e+="&"+n:e+="?"+n),document.location.replace(e)}open(e,t={}){this.link(e,t,!0)}loadImg(e,t){let n=new Image;n.src=e,n.onload=(()=>t(n)),n.onerror=(e=>this.log(e,"error"))}loadScriptAsync(e,t){if(this._scriptSet.has(e))t();else{let n=this.createDom("script");n.setAttribute("src",e),this.append(this._head,n),this.remove(n),n.onload=(()=>{this._scriptSet.add(e),"function"==typeof t&&t()})}}loadFileSync(e){let t=new XMLHttpRequest,n=null;return t.onload=(()=>n=JSON.parse(t.responseText)),t.open("GET",e,!1),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(null),n}loadScriptSync(e,t){if(this._scriptSet.has(e))t&&t();else{let n=new XMLHttpRequest;n.onload=(()=>{if(!n.responseText)return this.log("加载js失败！","error"),null;{let r=this.createDom("script",{language:"javascript",type:"text/javascript"});r.text=n.responseText,this.append(this._head,r),this._scriptSet.add(e),this.remove(r),t&&t()}}),n.open("GET",e,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(null)}}loadScriptStr(e,t,n){if(this._scriptSet.has(e))n&&n();else{if(!t)return this.log("加载js失败！","error"),null;{let r=this.createDom("script",{language:"javascript",type:"text/javascript"});r.text=t,this.append(this._head,r),this._scriptSet.add(e),this.remove(r),n&&n()}}}loadJSONAsync(e,t=null){let n=null;if(this._JSONMap.has(e))return"function"==typeof t&&t(),this._JSONMap.get(e);{let r=new XMLHttpRequest;r.onload=(()=>{if(!r.responseText)return this.log("加载json失败！","error"),null;try{n=JSON.parse(r.responseText)}catch(e){return console.log(e),this.log("加载json失败！","error"),null}this._JSONMap.set(e,n),"function"==typeof t&&t()}),r.open("GET",e,!1),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(null)}return n}log(e,t="log",n=""){let r=this.date()+" EasyScript";switch(t){case"log":console.log("["+r+" LOG] ",e);break;case"warn":console.warn("["+r+" WARN] ",e);break;case"error":console.error("["+r+" ERROR]",e)}}monitor(e,t=!1){}gcd(e,t){return t?this.gcd(t,e%t):e}scm(e,t){return e*t/this.gcd(e,t)}off(e,t){t?this._eventMap.get(e).delete(t):this._eventMap.delete(e)}on(e,...t){let n=document.body,r="click",s=t.pop();1===t.length&&(r=t[0]),2===t.length&&(n=t[0],r=t[1]),"drag"===r&&this.on(e,n,"mousedown",null),"resize"===r&&this.on(e,n,"mouseover",null),"rightClick"===r&&this.on(e,n,"mousedown",null),this._domEvent.has(n)||this._domEvent.set(n,new Map),this._eventMap.get(n)||this._eventMap.set(n,new Set),this._eventMap.get(n).has(r)||(this._eventMap.get(n).add(r),n.addEventListener(r,e=>{this._excEvent(e,n)},"blur"===r||"focus"===r||"scroll"===r)),this._domEvent.get(n).has(e)||this._domEvent.get(n).set(e,new Map),this._domEvent.get(n).get(e).get(r)||this._domEvent.get(n).get(e).set(r,new Set),this._domEvent.get(n).get(e).get(r).add(s)}_excEvent(e,t){let n=e.path||e.composedPath&&e.composedPath(),r=n.length-4-1;for(;r+1;--r)this._onFunction(n[r],t,e)}_onFunction(e,t,n){let r=n.type,s=n.target,o=[e.nodeName];e.id&&o.push("#"+e.id),e.classList.forEach(e=>o.push("."+e));let i=this._domEvent.get(t);o.forEach(t=>{i.get(t)&&i.get(t).has(r)&&("mousedown"===r&&(i.get(t).has("drag")&&i.get(t).get("drag").forEach(t=>this._drag(e,s,t)),i.get(t).has("rightClick")&&i.get(t).get("rightClick").forEach(t=>this._rightClick(e,s,t,n)),i.get(t).has("centerClick")&&i.get(t).get("centerClick").forEach(t=>this._centerClick(e,s,t,n))),"mouseover"===r&&i.get(t).has("resize")&&i.get(t).get("resize").forEach(t=>this._resize(e,s,t)),i.get(t).get(r).forEach(t=>"function"==typeof t&&t(e,s,n)))})}_rightClick(e,t,n,r){2===r.buttons&&n(e,t)}_centerClick(e,t,n,r){3===r.buttons&&n(e,t)}_drag(e,t,n){let r=1,s=e.parentNode.style.zoom,o=e.parentNode.style.transform;if(s)r=1/parseFloat(s);else if(o){let e=o.match(/scale\((\S*)\)/);e[1]&&(r=1/parseFloat(e[1]))}let i,a,l=window.event.screenX*r,c=window.event.screenY*r,h=parseInt(e.style.top),d=parseInt(e.style.left);e.style.cursor&&"default"!==e.style.cursor||(window.onmousemove=(t=>{i=h-c+t.screenY*r,a=d-l+t.screenX*r,e.style.top=i+"px",e.style.left=a+"px"}),window.onmouseup=(()=>{this._disposeWindowOn(),n&&n(e,t,i,a)}))}_disposeWindowOn(){window.onmousemove=null,window.onmousedown=null,window.onmouseup=null}_resize(e,t,n){let r=1,s=e.parentNode.style.transform.match(/scale\((.*?)\)/),o=e.parentNode.style.transform.match(/translate\((.*?)\)/),i=s?s[1]:1,a=0,l=0;if(i){r=1/parseFloat(i);let e=(o?o[1]:"0,0").split(",");a=parseFloat(e[0]),l=parseFloat(e[1])}let c,h,d,u,p,f,m=!1,g="default",y=()=>{let t=this.domSize(e),n=this.domPosition(e);d=t.width,u=t.height,c=n.top,h=n.left};e.onmousemove=(t=>{if(m)return;y();let n=t.layerY+(1-i)*c-l*i,s=t.layerX+(1-i)*h-a*i,o=10*r,p=n<o,f=n>u*i-o,w=s<o,v=s>d*i-o;g=!w||p||f?!v||p||f?!p||w||v?!f||w||v?w&&p?"nw-resize":w&&f?"sw-resize":v&&p?"ne-resize":v&&f?"se-resize":"default":"s-resize":"n-resize":"e-resize":"w-resize",e.style.cursor=g}),e.onmousedown=(()=>{y();let s=window.event.screenX*r,o=window.event.screenY*r;window.onmousemove=(t=>{m=!0,p=t.screenX*r-s,f=t.screenY*r-o;let n=()=>{e.style.height=u-f+"px",e.style.top=c+f+"px"},i=()=>e.style.height=u+f+"px",a=()=>{e.style.width=d-p+"px",e.style.left=h+p+"px"},l=()=>e.style.width=d+p+"px";"e-resize"===g?l():"s-resize"===g?i():"w-resize"===g?a():"n-resize"===g?n():"nw-resize"===g?(a(),n()):"ne-resize"===g?(l(),n()):"sw-resize"===g?(a(),i()):"se-resize"===g&&(l(),i())}),window.onmouseup=(()=>{m=!1,y(),this._disposeWindowOn(),n&&n(e,t)})})}autoSize(e,t,n=0){n*=2;let r,s,o=e.w-n,i=e.h-n,a=o/t.w,l=t.h*a;if(l<=i)r=t.w*a,s=l;else{let e=i/t.h;r=t.w*e,s=t.h*e}return{w:r,h:s,t:(i-s+n)/2,l:(o-r+n)/2,scale:r/t.w}}pushEnd(e,t){return Array.isArray(t)?e.push(...t):e}query(e,t=document){return t.querySelector(e)}queryAll(e,t=document){return t.querySelectorAll(e)}randomChar(e=4,t="upper"){let n="";for(let t=0;t<e;++t)n+=String.fromCharCode(65+Math.ceil(25*Math.random()));return"upper"===t?n:n.toLowerCase()}randomNum(e=0,t=1e3){return parseInt(Math.random()*(t-e+1)+e,10)}ready(e,t=!1,n=!0){n?this._isReady?this.log("page has already been built","warn"):document.addEventListener("DOMContentLoaded",()=>{this._isReady=!0,this.body=document.body,t?e(this):e()}):t?e(this):e()}remove(e,t=null){e&&("string"==typeof e&&t?this.remove(this.queryAll(e,t)):void 0!==e.length?e.forEach(e=>e.parentNode.removeChild(e)):e.parentNode.removeChild(e))}removeClass(e,t){return void 0!==e.length?e.forEach(e=>Array.isArray(t)?t.forEach(t=>this._removeClass(e,t)):this._removeClass(e,t)):Array.isArray(t)?t.forEach(t=>this._removeClass(e,t)):this._removeClass(e,t),e}_removeClass(e,t){"[object RegExp]"===Object.prototype.toString.call(t)?e.classList.forEach(n=>t.test(n)&&e.classList.remove(n)):e.classList.remove(t)}replaceAll(e,t){for(let n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e}_require(e,t={},n=(()=>{}),r=e.split("/").pop()){t.call?t.call.push(r):t.call=[r],this.loadScript(e+".class.js",()=>n(this._moduleStack.get(r)(t)))}_requireAsync(e,t={},n=e.split("/").pop()){return this.loadScriptAsync(e+".class.js"),t.call?t.call.push(n):t.call=[n],this._moduleStack.get(n)(t)}runCode(e){let t=window.open("","_blank","");t.document.open("text/html","replace"),t.opener=null,t.document.write(e),t.document.close()}setSheet(e,t){let n=e+"{";for(let e in t)n+=this.underscored(e)+":"+t[e]+";";return this._lastSheet.insertRule(n+"}",this._lastSheet.cssRules.length),e}simple(e=4){let t=this.randomChar(e);if(document.querySelector("."+t)||document.querySelector("#"+t))this.simple();else{if(!this.getStyleSheet("."+t).size||!this.getStyleSheet("#"+t).size)return t;this.simple()}}strLength(e){let t=0;for(let n of e)++t;return t}styleStr2Obj(e,t="camelize"){let n={};if(!e)return n;let r=e.match(/{([\s\S]*)}/);if(!r||r.length<2)return n;let s=[];return this.trim(this.trim(r[1]),{char:";",position:"right"}).split(";").forEach(e=>{s=e.split(":");let r=this.trim(s[0]);"camelize"===t&&(r=this.camelize(r)),n[r]=this.trim(s[1])}),n}stripTages(e){return e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,"").replace(/<[^>]+>/g,"")}textNode(e=""){return document.createTextNode(e)}toggleClass(e,t,n){return n?(this.hasClass(e,n)?this.removeClass(e,n):this.log("不存在的类名！","warn"),this.addClass(e,t)):this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t),e}trim(e,{char:t="",position:n=""}={}){if(!e)return e;let r="";return t?("left"===n&&(r=e.replace(new RegExp("^\\"+t+"+","g"),"")),"right"===n&&(r=e.replace(new RegExp("\\"+t+"+$","g"),"")),""===n&&(r=e.replace(new RegExp("^\\"+t+"+|\\"+t+"+$","g"),""))):r=e.trim(),r}truncate(e,t=30,n="..."){return e.length>t?e.slice(0,t-n.length)+n:e}updateSheet(e,t){let n=this.getStyleSheet(e);n&&console.log(this.styleStr2Obj(n.rule))}underscored(e,t="-"){return e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/\-/g,t).toLowerCase()}unescapeHTML(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&#([\d]+);/g,(e,t)=>String.fromCharCode(parseInt(t,10)))}union(e,t){return[...new Set([...e,...t])]}path(){let e=document.currentScript.src.split("/"),t="/";for(let n=3;n<e.length-1;++n)t+=e[n]+"/";return t}parent(e,t=null){if(null===typeof t)return e.parentNode;t=this.trim(t,{char:".",position:"left"});let n=e.parentNode;for(;t&&!this.hasClass(n,t)&&9!==n.nodeType;)n=n.parentNode;return n}verify(e,t){}domSize(e){return{width:e.offsetWidth,height:e.offsetHeight}}domPosition(e){return{top:e.offsetTop,left:e.offsetLeft}}windowSize(){return{ww:document.body.offsetWidth,wh:document.body.offsetHeight}}innerSize(){return{iw:window.innerWidth,ih:window.innerHeight}}wrap(e,t){let n=0;[...e.parentNode.childNodes].some(t=>{if("#text"!==t.nodeName)return++n,t===e}),this.append(e.parentNode,t,n),this.append(t,e)}getQueryVar(){let e=window.location.search.substring(1).split("&"),t={};return e.forEach(e=>{if(e){let n=e.split("=");t[n[0]]=unescape(n[1])}}),t}domIndex(e){let t=e.parentNode,n=0;return[...t.childNodes].some((t,r)=>{if(t===e)return n=r,!0}),n}typeOf(e){let t=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return/element/g.test(t)&&(t="element"),t}each(e,t){const n=this.typeOf(e);let r=e,s=0;switch(n){case"string":(r=[].slice.call(r)).forEach((e,n)=>{t&&t(e,n,r)});break;case"object":for(let e in r)t&&t({[e]:r[e]},s,r),s++;break;case"array":case"map":case"set":case"nodelist":r.forEach((e,n)=>{t&&t(e,n,r)});break;default:r=[r],t&&t(item,i,r)}return r}typeOfElement(e=""){if("string"!==this.typeOf(e))return this.log("请输入正确的字符串！","error"),null;const t="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",n={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])")};let r=null;return this.each(n,(t,n)=>{for(let n in t)t[n].test(e)&&(r=n)}),r}siblings(e,t){const n=this.typeOfElement(t);if("element"===this.typeOf(e)){let r=e.parentNode.firstChild,s=[];for(;r;r=r.nextSibling)1===r.nodeType&&r!==e&&s.push(r);let o=[],i={CLASS:"className",ID:"id"};switch(n){case"CLASS":case"ID":this.each(s,(e,n)=>{for(let n in i)"."+e[i[n]]!==t&&"#"+e[i[n]]!==t||o.push(e)});break;case"TAG":this.each(s,(e,n)=>{e.nodeName.toLowerCase()===t&&o.push(e)});break;default:o=s}return o}return this.log("请输入正确的dom元素！","log"),null}find(e,t){return"element"===this.typeOf(e)?t?this.queryAll(t,e.parentNode):e:(this.log("请输入正确的dom元素！","log"),null)}secToTime(e){let t="";if(e>-1){let n=Math.floor(e/3600),r=Math.floor(e/60)%60,s=e%60;t+=(n+":").padStart(3,"0"),t+=(r+":").padStart(3,"0"),t+=(s+"").padStart(2,"0")}return t}timeToSec(e){let t=0;return e.split(":").forEach((e,n)=>t+=parseInt(e.value)*Math.pow(60,2-n)),t}checkConn(e,t){let n,r=window.location.href;setInterval(()=>{(n=new XMLHttpRequest).onload=(()=>n.responseText&&t(!0));try{n.open("GET",r,!1),n.send(null)}catch(e){t(!1)}},e)}addActive(e){e&&(void 0!==e.length?e.forEach(e=>this.addActive(e)):this.addClass(e,"active"))}hasActive(e){return this.hasClass(e,"active")}removeActive(e){e&&(void 0!==e.length?e.forEach(e=>this.removeActive(e)):this.removeClass(e,"active"))}toggleActive(e){this.removeActive(this.queryAll(".active",e.parentNode)),this.addActive(e)}toggleActiveSelf(e,t,n){this.hasClass(e,"active")?("function"==typeof t&&n(e),this.removeActive(e)):("function"==typeof t&&t(e),this.addActive(e))}getData(e,t="id"){return this.attr(e,"data-"+t)}setData(e,t,n="id"){let r={};r["data-"+n]=t,this.attr(e,r)}emptyData(e,t){this.setData(e,"",t)}setLocTempData(e,t="tmp"){localStorage.setItem(t,e)}getLocTempData(e="tmp"){let t=localStorage.getItem(e);return localStorage.removeItem(e),t}randomColor(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}position(e){return{top:e.offsetTop,left:e.offsetLeft}}fileSave(e,t){let n=document.createElement("a"),r=new MouseEvent("click");n.download=e,n.href=t,n.dispatchEvent(r)}attempt(e,t,n=1e3){e()?t():setTimeout(()=>this.attempt(e,t,n),n)}prevDom(e){if(!e)return null;let t=e.previousSibling;return t?(t.nodeType!==Node.ELEMENT_NODE&&(t=this.prevDom(t)),t):null}nextDom(e){if(!e)return null;let t=e.nextSibling;return t?(t.nodeType!==Node.ELEMENT_NODE&&(t=this.nextDom(t)),t):null}appendTo(e,t,n){!n||n>=e.children.length?e.appendChild(t):n<1?e.insertBefore(t,e.children[0]):e.insertBefore(t,e.children[n])}moveNext(e){let t=cp.nextDom(e);t&&e.parentNode.insertBefore(t,e)}movePrev(e){let t=cp.prevDom(e);t&&e.parentNode.insertBefore(e,t)}endebug(e="/error"){!function(e){var t=t||{};t.create=function(e){function t(){window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized?n("on"):(o="off",console.log(i),console.clear(),n(o))}function n(e){a!==e&&(a=e,"function"==typeof s.onchange&&s.onchange(e))}"function"==typeof e&&(e={onchange:e});var r=(e=e||{}).delay||500,s={};s.onchange=e.onchange;var o,i=new Image;i.__defineGetter__("id",function(){o="on"});var a="unknown";s.getStatus=function(){return a};var l,c=setInterval(t,r);return window.addEventListener("resize",t),s.free=function(){l||(l=!0,window.removeEventListener("resize",t),clearInterval(c))},s},window.jdetects=t}(),jdetects.create(function(t){var n=0;setInterval(function(){"on"==t&&setTimeout(function(){0==n&&(n=1,localStorage.clear(),sessionStorage.clear(),setTimeout(function(){document.write(""),top.location.href=e+"?t="+(new Date).getTime()}))},200)},100)})}clipboard(e,t=null){const n=this.createDom("INPUT",{value:e});document.body.appendChild(n),n.select(),document.execCommand("copy")&&"function"==typeof t&&t(),document.body.removeChild(n)}children(e){return e.childNodes.forEach(t=>{3===t.nodeType&&e.removeChild(t)}),e.childNodes}}window.cp?console.warn("cp 全局变量已被占用！"):window.cp=new Cp;